{% extends 'base_index.html' %}
{% load static %}

{% block title %}Solicitud de Cotización{% endblock %}

{% block content %}
<div class="container py-5">
    <h1>Solicitud de Cotización</h1>
    <p>Revise los productos seleccionados y complete sus datos para que nos contacten.</p>

    {% if items %}
    <div class="mb-4">
        <table class="table">
            <thead>
                <tr><th>Producto</th><th>Cantidad</th><th>Precio unit.</th><th>Total</th></tr>
            </thead>
            <tbody>
                {% for it in items %}
                <tr>
                    <td>{{ it.product.nombre }}</td>
                    <td>{{ it.cantidad }}</td>
                    <td>${{ it.product.precio }}</td>
                    <td>${{ it.total }}</td>
                </tr>
                {% endfor %}
                <tr>
                    <td colspan="3" class="text-end"><strong>Subtotal</strong></td>
                    <td><strong>${{ subtotal }}</strong></td>
                </tr>
            </tbody>
        </table>
    </div>

    <form method="post" class="row g-3">
        {% csrf_token %}
        <div class="col-md-4">
            <label class="form-label">Nombre*</label>
            <input type="text" name="nombre" class="form-control" required>
        </div>
        <div class="col-md-4">
            <label class="form-label">Correo electrónico*</label>
            <input type="email" name="correo" class="form-control" required>
        </div>
        <div class="col-md-4">
            <label class="form-label">Teléfono</label>
            <input type="text" name="telefono" class="form-control">
        </div>
        <div class="col-12">
            <label class="form-label">Mensaje / Detalles adicionales</label>
            <textarea name="mensaje" class="form-control" rows="4"></textarea>
        </div>
        <div class="col-12">
            <button type="submit" class="btn btn-primary">Enviar solicitud</button>
            <a href="{% url 'tienda' %}" class="btn btn-secondary ms-2">Seguir comprando</a>
        </div>
    </form>
    {% else %}
        <div class="alert alert-info">No hay productos en la solicitud. <a href="{% url 'tienda' %}">Ir a la tienda</a></div>
    {% endif %}
</div>
{% endblock %}
